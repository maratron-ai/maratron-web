{"version":3,"names":["_parseDuration","require","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","calculateAnalytics","runs","totalRuns","totalDistance","totalTime","averagePace","longestRun","weeklyAverage","monthlyTrend","paceProgression","distanceDistribution","weeklyDistanceChart","cumulativeDistance","normalizedRuns","map","run","distanceInMiles","distanceUnit","distance","durationInMinutes","parseDuration","duration","reduce","sum","Math","max","averagePaceMinutes","formatPace","dateRange","getDateRange","weeksDifference","ceil","calculateMonthlyTrend","calculatePaceProgression","calculateDistanceDistribution","week","weekTimestamp","weekStart","getTime","calculateCumulativeDistance","paceInMinutes","minutes","floor","seconds","round","toString","padStart","dates","Date","date","earliest","min","latest","now","weeks","i","setDate","getDate","getDay","setHours","weeklyData","Map","weekKey","toISOString","split","set","has","existing","get","Array","from","entries","data","formatWeekLabel","weekDate","sort","a","b","localeCompare","paceMinutes","month","pace","monthDate","entry","ranges","range","Infinity","count","percentage","weekString","toLocaleDateString","day","cumulative","total"],"sources":["analytics.ts"],"sourcesContent":["import type { Run } from \"@maratypes/run\";\nimport { parseDuration } from \"@lib/utils/time/parseDuration\";\n\ninterface AnalyticsData {\n  totalRuns: number;\n  totalDistance: number;\n  totalTime: number;\n  averagePace: string;\n  longestRun: number;\n  weeklyAverage: number;\n  monthlyTrend: { week: string; distance: number; runs: number; weekDate: string; weekStart: Date }[];\n  paceProgression: { month: string; pace: string; paceMinutes: number; monthDate: string; weekStart: Date }[];\n  distanceDistribution: { range: string; count: number; percentage: number }[];\n  weeklyDistanceChart: { week: string; distance: number; runs: number; weekStart: Date; weekTimestamp: number }[];\n  cumulativeDistance: { month: string; total: number; weekStart: Date; weekTimestamp: number }[];\n}\n\nexport function calculateAnalytics(runs: Run[]): AnalyticsData {\n  if (runs.length === 0) {\n    return {\n      totalRuns: 0,\n      totalDistance: 0,\n      totalTime: 0,\n      averagePace: \"0:00\",\n      longestRun: 0,\n      weeklyAverage: 0,\n      monthlyTrend: [],\n      paceProgression: [],\n      distanceDistribution: [],\n      weeklyDistanceChart: [],\n      cumulativeDistance: [],\n    };\n  }\n\n  // Convert all distances to miles for consistency\n  const normalizedRuns = runs.map(run => ({\n    ...run,\n    distanceInMiles: run.distanceUnit === \"kilometers\" ? run.distance * 0.621371 : run.distance,\n    durationInMinutes: parseDuration(run.duration) / 60,\n  }));\n\n  // Basic stats\n  const totalRuns = normalizedRuns.length;\n  const totalDistance = normalizedRuns.reduce((sum, run) => sum + run.distanceInMiles, 0);\n  const totalTime = normalizedRuns.reduce((sum, run) => sum + run.durationInMinutes, 0);\n  const longestRun = Math.max(...normalizedRuns.map(run => run.distanceInMiles));\n\n  // Average pace calculation\n  const averagePaceMinutes = totalDistance > 0 ? totalTime / totalDistance : 0;\n  const averagePace = formatPace(averagePaceMinutes);\n\n  // Weekly average (assume data spans multiple weeks)\n  const dateRange = getDateRange(normalizedRuns);\n  const weeksDifference = Math.max(1, Math.ceil(dateRange / 7));\n  const weeklyAverage = totalDistance / weeksDifference;\n\n  // Monthly trend (last 12 weeks)\n  const monthlyTrend = calculateMonthlyTrend(normalizedRuns);\n\n  // Pace progression (last 6 months)\n  const paceProgression = calculatePaceProgression(normalizedRuns);\n\n  // Distance distribution\n  const distanceDistribution = calculateDistanceDistribution(normalizedRuns);\n\n  // Weekly distance chart with timestamps for proper time axis\n  const weeklyDistanceChart = monthlyTrend.map(week => ({\n    ...week,\n    weekTimestamp: week.weekStart.getTime(),\n  }));\n\n  // Cumulative distance over time\n  const cumulativeDistance = calculateCumulativeDistance(normalizedRuns);\n\n  return {\n    totalRuns,\n    totalDistance,\n    totalTime,\n    averagePace,\n    longestRun,\n    weeklyAverage,\n    monthlyTrend,\n    paceProgression,\n    distanceDistribution,\n    weeklyDistanceChart,\n    cumulativeDistance,\n  };\n}\n\nfunction formatPace(paceInMinutes: number): string {\n  if (paceInMinutes === 0) return \"0:00\";\n  const minutes = Math.floor(paceInMinutes);\n  const seconds = Math.round((paceInMinutes - minutes) * 60);\n  return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n}\n\nfunction getDateRange(runs: { date: Date }[]): number {\n  if (runs.length === 0) return 0;\n  const dates = runs.map(run => new Date(run.date).getTime());\n  const earliest = Math.min(...dates);\n  const latest = Math.max(...dates);\n  return (latest - earliest) / (1000 * 60 * 60 * 24); // days\n}\n\nfunction calculateMonthlyTrend(runs: { date: Date; distanceInMiles: number }[]): \n  { week: string; distance: number; runs: number; weekDate: string; weekStart: Date }[] {\n  // Generate a complete set of weeks covering the data range plus 12 weeks back\n  const now = new Date();\n  \n  // Generate 12 weeks of complete week intervals\n  const weeks = [];\n  for (let i = 11; i >= 0; i--) {\n    const weekStart = new Date(now);\n    weekStart.setDate(now.getDate() - now.getDay() - (i * 7)); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    weeks.push(weekStart);\n  }\n  \n  // Group runs by week\n  const weeklyData = new Map<string, { distance: number; runs: number; weekStart: Date }>();\n  \n  weeks.forEach(weekStart => {\n    const weekKey = weekStart.toISOString().split('T')[0];\n    weeklyData.set(weekKey, { distance: 0, runs: 0, weekStart: new Date(weekStart) });\n  });\n  \n  runs.forEach(run => {\n    const date = new Date(run.date);\n    const weekStart = new Date(date);\n    weekStart.setDate(date.getDate() - date.getDay()); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    const weekKey = weekStart.toISOString().split('T')[0];\n    \n    if (weeklyData.has(weekKey)) {\n      const existing = weeklyData.get(weekKey)!;\n      existing.distance += run.distanceInMiles;\n      existing.runs += 1;\n    }\n  });\n\n  return Array.from(weeklyData.entries())\n    .map(([weekKey, data]) => ({\n      week: formatWeekLabel(weekKey),\n      distance: Math.round(data.distance * 10) / 10,\n      runs: data.runs,\n      weekDate: weekKey,\n      weekStart: data.weekStart,\n    }))\n    .sort((a, b) => a.weekDate.localeCompare(b.weekDate));\n}\n\nfunction calculatePaceProgression(runs: { date: Date; distanceInMiles: number; durationInMinutes: number }[]): \n  { month: string; pace: string; paceMinutes: number; monthDate: string; weekStart: Date; weekTimestamp: number }[] {\n  // Generate 12 weeks of complete week intervals for pace progression\n  const now = new Date();\n  const weeks = [];\n  for (let i = 11; i >= 0; i--) {\n    const weekStart = new Date(now);\n    weekStart.setDate(now.getDate() - now.getDay() - (i * 7)); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    weeks.push(weekStart);\n  }\n  \n  // Group runs by week\n  const weeklyData = new Map<string, { totalDistance: number; totalTime: number; weekStart: Date }>();\n  \n  weeks.forEach(weekStart => {\n    const weekKey = weekStart.toISOString().split('T')[0];\n    weeklyData.set(weekKey, { totalDistance: 0, totalTime: 0, weekStart: new Date(weekStart) });\n  });\n  \n  runs.forEach(run => {\n    const date = new Date(run.date);\n    const weekStart = new Date(date);\n    weekStart.setDate(date.getDate() - date.getDay()); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    const weekKey = weekStart.toISOString().split('T')[0];\n    \n    if (weeklyData.has(weekKey)) {\n      const existing = weeklyData.get(weekKey)!;\n      existing.totalDistance += run.distanceInMiles;\n      existing.totalTime += run.durationInMinutes;\n    }\n  });\n\n  return Array.from(weeklyData.entries())\n    .map(([weekKey, data]) => {\n      const paceMinutes = data.totalDistance > 0 ? data.totalTime / data.totalDistance : 0;\n      return {\n        month: formatWeekLabel(weekKey), // Using week label instead of month\n        pace: formatPace(paceMinutes),\n        paceMinutes: Math.round(paceMinutes * 100) / 100,\n        monthDate: weekKey,\n        weekStart: data.weekStart,\n        weekTimestamp: data.weekStart.getTime(),\n      };\n    })\n    .filter(entry => entry.paceMinutes > 0) // Only include weeks with actual runs\n    .sort((a, b) => a.monthDate.localeCompare(b.monthDate));\n}\n\nfunction calculateDistanceDistribution(runs: { distanceInMiles: number }[]): \n  { range: string; count: number; percentage: number }[] {\n  const ranges = [\n    { range: \"0-1 miles\", min: 0, max: 1 },\n    { range: \"1-3 miles\", min: 1.01, max: 3 },\n    { range: \"3-5 miles\", min: 3.01, max: 5 },\n    { range: \"5-10 miles\", min: 5.01, max: 10 },\n    { range: \"10-15 miles\", min: 10.01, max: 15 },\n    { range: \"15+ miles\", min: 15.01, max: Infinity },\n  ];\n\n  const totalRuns = runs.length;\n  return ranges.map(({ range, min, max }) => {\n    const count = runs.filter(run => run.distanceInMiles >= min && run.distanceInMiles <= max).length;\n    return {\n      range,\n      count,\n      percentage: totalRuns > 0 ? Math.round((count / totalRuns) * 100) : 0,\n    };\n  });\n}\n\nfunction formatWeekLabel(weekString: string): string {\n  const date = new Date(weekString);\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n}\n\n\nfunction calculateCumulativeDistance(runs: { date: Date; distanceInMiles: number }[]): \n  { month: string; total: number; weekStart: Date; weekTimestamp: number }[] {\n  // Generate 12 weeks of complete week intervals\n  const now = new Date();\n  const weeks = [];\n  for (let i = 11; i >= 0; i--) {\n    const weekStart = new Date(now);\n    weekStart.setDate(now.getDate() - now.getDay() - (i * 7)); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    weeks.push(weekStart);\n  }\n  \n  // Group runs by week\n  const weeklyData = new Map<string, { distance: number; weekStart: Date }>();\n  \n  weeks.forEach(weekStart => {\n    const weekKey = weekStart.toISOString().split('T')[0];\n    weeklyData.set(weekKey, { distance: 0, weekStart: new Date(weekStart) });\n  });\n  \n  runs.forEach(run => {\n    const date = new Date(run.date);\n    const weekStart = new Date(date);\n    weekStart.setDate(date.getDate() - date.getDay()); // Start of week (Sunday)\n    weekStart.setHours(0, 0, 0, 0);\n    const weekKey = weekStart.toISOString().split('T')[0];\n    \n    if (weeklyData.has(weekKey)) {\n      const existing = weeklyData.get(weekKey)!;\n      existing.distance += run.distanceInMiles;\n    }\n  });\n\n  // Convert to cumulative totals\n  let cumulative = 0;\n  return Array.from(weeklyData.entries())\n    .sort(([a], [b]) => a.localeCompare(b))\n    .map(([weekKey, data]) => {\n      cumulative += data.distance;\n      return {\n        month: formatWeekLabel(weekKey),\n        total: Math.round(cumulative * 10) / 10,\n        weekStart: data.weekStart,\n        weekTimestamp: data.weekStart.getTime(),\n      };\n    });\n}"],"mappings":";;;;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AAA8D,SAAAC,QAAAC,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,OAAAG,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,GAAAC,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,EAAAC,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAZ,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,QAAAe,gBAAA,CAAAC,OAAA,EAAAjB,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAe,yBAAA,GAAAf,MAAA,CAAAgB,gBAAA,CAAAnB,CAAA,EAAAG,MAAA,CAAAe,yBAAA,CAAAhB,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAiB,cAAA,CAAApB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAD,CAAA;AAgBvD,SAASqB,kBAAkBA,CAACC,IAAW,EAAiB;EAC7D,IAAIA,IAAI,CAACR,MAAM,KAAK,CAAC,EAAE;IACrB,OAAO;MACLS,SAAS,EAAE,CAAC;MACZC,aAAa,EAAE,CAAC;MAChBC,SAAS,EAAE,CAAC;MACZC,WAAW,EAAE,MAAM;MACnBC,UAAU,EAAE,CAAC;MACbC,aAAa,EAAE,CAAC;MAChBC,YAAY,EAAE,EAAE;MAChBC,eAAe,EAAE,EAAE;MACnBC,oBAAoB,EAAE,EAAE;MACxBC,mBAAmB,EAAE,EAAE;MACvBC,kBAAkB,EAAE;IACtB,CAAC;EACH;;EAEA;EACA,MAAMC,cAAc,GAAGZ,IAAI,CAACa,GAAG,CAACC,GAAG,IAAAxB,aAAA,CAAAA,aAAA,KAC9BwB,GAAG;IACNC,eAAe,EAAED,GAAG,CAACE,YAAY,KAAK,YAAY,GAAGF,GAAG,CAACG,QAAQ,GAAG,QAAQ,GAAGH,GAAG,CAACG,QAAQ;IAC3FC,iBAAiB,EAAE,IAAAC,4BAAa,EAACL,GAAG,CAACM,QAAQ,CAAC,GAAG;EAAE,EACnD,CAAC;;EAEH;EACA,MAAMnB,SAAS,GAAGW,cAAc,CAACpB,MAAM;EACvC,MAAMU,aAAa,GAAGU,cAAc,CAACS,MAAM,CAAC,CAACC,GAAG,EAAER,GAAG,KAAKQ,GAAG,GAAGR,GAAG,CAACC,eAAe,EAAE,CAAC,CAAC;EACvF,MAAMZ,SAAS,GAAGS,cAAc,CAACS,MAAM,CAAC,CAACC,GAAG,EAAER,GAAG,KAAKQ,GAAG,GAAGR,GAAG,CAACI,iBAAiB,EAAE,CAAC,CAAC;EACrF,MAAMb,UAAU,GAAGkB,IAAI,CAACC,GAAG,CAAC,GAAGZ,cAAc,CAACC,GAAG,CAACC,GAAG,IAAIA,GAAG,CAACC,eAAe,CAAC,CAAC;;EAE9E;EACA,MAAMU,kBAAkB,GAAGvB,aAAa,GAAG,CAAC,GAAGC,SAAS,GAAGD,aAAa,GAAG,CAAC;EAC5E,MAAME,WAAW,GAAGsB,UAAU,CAACD,kBAAkB,CAAC;;EAElD;EACA,MAAME,SAAS,GAAGC,YAAY,CAAChB,cAAc,CAAC;EAC9C,MAAMiB,eAAe,GAAGN,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACO,IAAI,CAACH,SAAS,GAAG,CAAC,CAAC,CAAC;EAC7D,MAAMrB,aAAa,GAAGJ,aAAa,GAAG2B,eAAe;;EAErD;EACA,MAAMtB,YAAY,GAAGwB,qBAAqB,CAACnB,cAAc,CAAC;;EAE1D;EACA,MAAMJ,eAAe,GAAGwB,wBAAwB,CAACpB,cAAc,CAAC;;EAEhE;EACA,MAAMH,oBAAoB,GAAGwB,6BAA6B,CAACrB,cAAc,CAAC;;EAE1E;EACA,MAAMF,mBAAmB,GAAGH,YAAY,CAACM,GAAG,CAACqB,IAAI,IAAA5C,aAAA,CAAAA,aAAA,KAC5C4C,IAAI;IACPC,aAAa,EAAED,IAAI,CAACE,SAAS,CAACC,OAAO,CAAC;EAAC,EACvC,CAAC;;EAEH;EACA,MAAM1B,kBAAkB,GAAG2B,2BAA2B,CAAC1B,cAAc,CAAC;EAEtE,OAAO;IACLX,SAAS;IACTC,aAAa;IACbC,SAAS;IACTC,WAAW;IACXC,UAAU;IACVC,aAAa;IACbC,YAAY;IACZC,eAAe;IACfC,oBAAoB;IACpBC,mBAAmB;IACnBC;EACF,CAAC;AACH;AAEA,SAASe,UAAUA,CAACa,aAAqB,EAAU;EACjD,IAAIA,aAAa,KAAK,CAAC,EAAE,OAAO,MAAM;EACtC,MAAMC,OAAO,GAAGjB,IAAI,CAACkB,KAAK,CAACF,aAAa,CAAC;EACzC,MAAMG,OAAO,GAAGnB,IAAI,CAACoB,KAAK,CAAC,CAACJ,aAAa,GAAGC,OAAO,IAAI,EAAE,CAAC;EAC1D,OAAO,GAAGA,OAAO,IAAIE,OAAO,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;AAC5D;AAEA,SAASjB,YAAYA,CAAC5B,IAAsB,EAAU;EACpD,IAAIA,IAAI,CAACR,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;EAC/B,MAAMsD,KAAK,GAAG9C,IAAI,CAACa,GAAG,CAACC,GAAG,IAAI,IAAIiC,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAAC,CAACX,OAAO,CAAC,CAAC,CAAC;EAC3D,MAAMY,QAAQ,GAAG1B,IAAI,CAAC2B,GAAG,CAAC,GAAGJ,KAAK,CAAC;EACnC,MAAMK,MAAM,GAAG5B,IAAI,CAACC,GAAG,CAAC,GAAGsB,KAAK,CAAC;EACjC,OAAO,CAACK,MAAM,GAAGF,QAAQ,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACtD;AAEA,SAASlB,qBAAqBA,CAAC/B,IAA+C,EACU;EACtF;EACA,MAAMoD,GAAG,GAAG,IAAIL,IAAI,CAAC,CAAC;;EAEtB;EACA,MAAMM,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC5B,MAAMlB,SAAS,GAAG,IAAIW,IAAI,CAACK,GAAG,CAAC;IAC/BhB,SAAS,CAACmB,OAAO,CAACH,GAAG,CAACI,OAAO,CAAC,CAAC,GAAGJ,GAAG,CAACK,MAAM,CAAC,CAAC,GAAIH,CAAC,GAAG,CAAE,CAAC,CAAC,CAAC;IAC3DlB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9BL,KAAK,CAACjE,IAAI,CAACgD,SAAS,CAAC;EACvB;;EAEA;EACA,MAAMuB,UAAU,GAAG,IAAIC,GAAG,CAA8D,CAAC;EAEzFP,KAAK,CAAC5D,OAAO,CAAC2C,SAAS,IAAI;IACzB,MAAMyB,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrDJ,UAAU,CAACK,GAAG,CAACH,OAAO,EAAE;MAAE5C,QAAQ,EAAE,CAAC;MAAEjB,IAAI,EAAE,CAAC;MAAEoC,SAAS,EAAE,IAAIW,IAAI,CAACX,SAAS;IAAE,CAAC,CAAC;EACnF,CAAC,CAAC;EAEFpC,IAAI,CAACP,OAAO,CAACqB,GAAG,IAAI;IAClB,MAAMkC,IAAI,GAAG,IAAID,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAAC;IAC/B,MAAMZ,SAAS,GAAG,IAAIW,IAAI,CAACC,IAAI,CAAC;IAChCZ,SAAS,CAACmB,OAAO,CAACP,IAAI,CAACQ,OAAO,CAAC,CAAC,GAAGR,IAAI,CAACS,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACnDrB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9B,MAAMG,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAErD,IAAIJ,UAAU,CAACM,GAAG,CAACJ,OAAO,CAAC,EAAE;MAC3B,MAAMK,QAAQ,GAAGP,UAAU,CAACQ,GAAG,CAACN,OAAO,CAAE;MACzCK,QAAQ,CAACjD,QAAQ,IAAIH,GAAG,CAACC,eAAe;MACxCmD,QAAQ,CAAClE,IAAI,IAAI,CAAC;IACpB;EACF,CAAC,CAAC;EAEF,OAAOoE,KAAK,CAACC,IAAI,CAACV,UAAU,CAACW,OAAO,CAAC,CAAC,CAAC,CACpCzD,GAAG,CAAC,CAAC,CAACgD,OAAO,EAAEU,IAAI,CAAC,MAAM;IACzBrC,IAAI,EAAEsC,eAAe,CAACX,OAAO,CAAC;IAC9B5C,QAAQ,EAAEM,IAAI,CAACoB,KAAK,CAAC4B,IAAI,CAACtD,QAAQ,GAAG,EAAE,CAAC,GAAG,EAAE;IAC7CjB,IAAI,EAAEuE,IAAI,CAACvE,IAAI;IACfyE,QAAQ,EAAEZ,OAAO;IACjBzB,SAAS,EAAEmC,IAAI,CAACnC;EAClB,CAAC,CAAC,CAAC,CACFsC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACF,QAAQ,CAACI,aAAa,CAACD,CAAC,CAACH,QAAQ,CAAC,CAAC;AACzD;AAEA,SAASzC,wBAAwBA,CAAChC,IAA0E,EACQ;EAClH;EACA,MAAMoD,GAAG,GAAG,IAAIL,IAAI,CAAC,CAAC;EACtB,MAAMM,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC5B,MAAMlB,SAAS,GAAG,IAAIW,IAAI,CAACK,GAAG,CAAC;IAC/BhB,SAAS,CAACmB,OAAO,CAACH,GAAG,CAACI,OAAO,CAAC,CAAC,GAAGJ,GAAG,CAACK,MAAM,CAAC,CAAC,GAAIH,CAAC,GAAG,CAAE,CAAC,CAAC,CAAC;IAC3DlB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9BL,KAAK,CAACjE,IAAI,CAACgD,SAAS,CAAC;EACvB;;EAEA;EACA,MAAMuB,UAAU,GAAG,IAAIC,GAAG,CAAwE,CAAC;EAEnGP,KAAK,CAAC5D,OAAO,CAAC2C,SAAS,IAAI;IACzB,MAAMyB,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrDJ,UAAU,CAACK,GAAG,CAACH,OAAO,EAAE;MAAE3D,aAAa,EAAE,CAAC;MAAEC,SAAS,EAAE,CAAC;MAAEiC,SAAS,EAAE,IAAIW,IAAI,CAACX,SAAS;IAAE,CAAC,CAAC;EAC7F,CAAC,CAAC;EAEFpC,IAAI,CAACP,OAAO,CAACqB,GAAG,IAAI;IAClB,MAAMkC,IAAI,GAAG,IAAID,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAAC;IAC/B,MAAMZ,SAAS,GAAG,IAAIW,IAAI,CAACC,IAAI,CAAC;IAChCZ,SAAS,CAACmB,OAAO,CAACP,IAAI,CAACQ,OAAO,CAAC,CAAC,GAAGR,IAAI,CAACS,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACnDrB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9B,MAAMG,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAErD,IAAIJ,UAAU,CAACM,GAAG,CAACJ,OAAO,CAAC,EAAE;MAC3B,MAAMK,QAAQ,GAAGP,UAAU,CAACQ,GAAG,CAACN,OAAO,CAAE;MACzCK,QAAQ,CAAChE,aAAa,IAAIY,GAAG,CAACC,eAAe;MAC7CmD,QAAQ,CAAC/D,SAAS,IAAIW,GAAG,CAACI,iBAAiB;IAC7C;EACF,CAAC,CAAC;EAEF,OAAOkD,KAAK,CAACC,IAAI,CAACV,UAAU,CAACW,OAAO,CAAC,CAAC,CAAC,CACpCzD,GAAG,CAAC,CAAC,CAACgD,OAAO,EAAEU,IAAI,CAAC,KAAK;IACxB,MAAMO,WAAW,GAAGP,IAAI,CAACrE,aAAa,GAAG,CAAC,GAAGqE,IAAI,CAACpE,SAAS,GAAGoE,IAAI,CAACrE,aAAa,GAAG,CAAC;IACpF,OAAO;MACL6E,KAAK,EAAEP,eAAe,CAACX,OAAO,CAAC;MAAE;MACjCmB,IAAI,EAAEtD,UAAU,CAACoD,WAAW,CAAC;MAC7BA,WAAW,EAAEvD,IAAI,CAACoB,KAAK,CAACmC,WAAW,GAAG,GAAG,CAAC,GAAG,GAAG;MAChDG,SAAS,EAAEpB,OAAO;MAClBzB,SAAS,EAAEmC,IAAI,CAACnC,SAAS;MACzBD,aAAa,EAAEoC,IAAI,CAACnC,SAAS,CAACC,OAAO,CAAC;IACxC,CAAC;EACH,CAAC,CAAC,CACDpD,MAAM,CAACiG,KAAK,IAAIA,KAAK,CAACJ,WAAW,GAAG,CAAC,CAAC,CAAC;EAAA,CACvCJ,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACM,SAAS,CAACJ,aAAa,CAACD,CAAC,CAACK,SAAS,CAAC,CAAC;AAC3D;AAEA,SAAShD,6BAA6BA,CAACjC,IAAmC,EACjB;EACvD,MAAMmF,MAAM,GAAG,CACb;IAAEC,KAAK,EAAE,WAAW;IAAElC,GAAG,EAAE,CAAC;IAAE1B,GAAG,EAAE;EAAE,CAAC,EACtC;IAAE4D,KAAK,EAAE,WAAW;IAAElC,GAAG,EAAE,IAAI;IAAE1B,GAAG,EAAE;EAAE,CAAC,EACzC;IAAE4D,KAAK,EAAE,WAAW;IAAElC,GAAG,EAAE,IAAI;IAAE1B,GAAG,EAAE;EAAE,CAAC,EACzC;IAAE4D,KAAK,EAAE,YAAY;IAAElC,GAAG,EAAE,IAAI;IAAE1B,GAAG,EAAE;EAAG,CAAC,EAC3C;IAAE4D,KAAK,EAAE,aAAa;IAAElC,GAAG,EAAE,KAAK;IAAE1B,GAAG,EAAE;EAAG,CAAC,EAC7C;IAAE4D,KAAK,EAAE,WAAW;IAAElC,GAAG,EAAE,KAAK;IAAE1B,GAAG,EAAE6D;EAAS,CAAC,CAClD;EAED,MAAMpF,SAAS,GAAGD,IAAI,CAACR,MAAM;EAC7B,OAAO2F,MAAM,CAACtE,GAAG,CAAC,CAAC;IAAEuE,KAAK;IAAElC,GAAG;IAAE1B;EAAI,CAAC,KAAK;IACzC,MAAM8D,KAAK,GAAGtF,IAAI,CAACf,MAAM,CAAC6B,GAAG,IAAIA,GAAG,CAACC,eAAe,IAAImC,GAAG,IAAIpC,GAAG,CAACC,eAAe,IAAIS,GAAG,CAAC,CAAChC,MAAM;IACjG,OAAO;MACL4F,KAAK;MACLE,KAAK;MACLC,UAAU,EAAEtF,SAAS,GAAG,CAAC,GAAGsB,IAAI,CAACoB,KAAK,CAAE2C,KAAK,GAAGrF,SAAS,GAAI,GAAG,CAAC,GAAG;IACtE,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASuE,eAAeA,CAACgB,UAAkB,EAAU;EACnD,MAAMxC,IAAI,GAAG,IAAID,IAAI,CAACyC,UAAU,CAAC;EACjC,OAAOxC,IAAI,CAACyC,kBAAkB,CAAC,OAAO,EAAE;IAAEV,KAAK,EAAE,OAAO;IAAEW,GAAG,EAAE;EAAU,CAAC,CAAC;AAC7E;AAGA,SAASpD,2BAA2BA,CAACtC,IAA+C,EACP;EAC3E;EACA,MAAMoD,GAAG,GAAG,IAAIL,IAAI,CAAC,CAAC;EACtB,MAAMM,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC5B,MAAMlB,SAAS,GAAG,IAAIW,IAAI,CAACK,GAAG,CAAC;IAC/BhB,SAAS,CAACmB,OAAO,CAACH,GAAG,CAACI,OAAO,CAAC,CAAC,GAAGJ,GAAG,CAACK,MAAM,CAAC,CAAC,GAAIH,CAAC,GAAG,CAAE,CAAC,CAAC,CAAC;IAC3DlB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9BL,KAAK,CAACjE,IAAI,CAACgD,SAAS,CAAC;EACvB;;EAEA;EACA,MAAMuB,UAAU,GAAG,IAAIC,GAAG,CAAgD,CAAC;EAE3EP,KAAK,CAAC5D,OAAO,CAAC2C,SAAS,IAAI;IACzB,MAAMyB,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrDJ,UAAU,CAACK,GAAG,CAACH,OAAO,EAAE;MAAE5C,QAAQ,EAAE,CAAC;MAAEmB,SAAS,EAAE,IAAIW,IAAI,CAACX,SAAS;IAAE,CAAC,CAAC;EAC1E,CAAC,CAAC;EAEFpC,IAAI,CAACP,OAAO,CAACqB,GAAG,IAAI;IAClB,MAAMkC,IAAI,GAAG,IAAID,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAAC;IAC/B,MAAMZ,SAAS,GAAG,IAAIW,IAAI,CAACC,IAAI,CAAC;IAChCZ,SAAS,CAACmB,OAAO,CAACP,IAAI,CAACQ,OAAO,CAAC,CAAC,GAAGR,IAAI,CAACS,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACnDrB,SAAS,CAACsB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9B,MAAMG,OAAO,GAAGzB,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAErD,IAAIJ,UAAU,CAACM,GAAG,CAACJ,OAAO,CAAC,EAAE;MAC3B,MAAMK,QAAQ,GAAGP,UAAU,CAACQ,GAAG,CAACN,OAAO,CAAE;MACzCK,QAAQ,CAACjD,QAAQ,IAAIH,GAAG,CAACC,eAAe;IAC1C;EACF,CAAC,CAAC;;EAEF;EACA,IAAI4E,UAAU,GAAG,CAAC;EAClB,OAAOvB,KAAK,CAACC,IAAI,CAACV,UAAU,CAACW,OAAO,CAAC,CAAC,CAAC,CACpCI,IAAI,CAAC,CAAC,CAACC,CAAC,CAAC,EAAE,CAACC,CAAC,CAAC,KAAKD,CAAC,CAACE,aAAa,CAACD,CAAC,CAAC,CAAC,CACtC/D,GAAG,CAAC,CAAC,CAACgD,OAAO,EAAEU,IAAI,CAAC,KAAK;IACxBoB,UAAU,IAAIpB,IAAI,CAACtD,QAAQ;IAC3B,OAAO;MACL8D,KAAK,EAAEP,eAAe,CAACX,OAAO,CAAC;MAC/B+B,KAAK,EAAErE,IAAI,CAACoB,KAAK,CAACgD,UAAU,GAAG,EAAE,CAAC,GAAG,EAAE;MACvCvD,SAAS,EAAEmC,IAAI,CAACnC,SAAS;MACzBD,aAAa,EAAEoC,IAAI,CAACnC,SAAS,CAACC,OAAO,CAAC;IACxC,CAAC;EACH,CAAC,CAAC;AACN","ignoreList":[]}