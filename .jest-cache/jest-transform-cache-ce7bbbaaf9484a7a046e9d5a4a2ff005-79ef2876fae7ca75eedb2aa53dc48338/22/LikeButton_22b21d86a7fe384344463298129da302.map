{"version":3,"names":["Object","defineProperty","exports","value","default","LikeButton","_react","_interopRequireWildcard","require","_useSocialProfile","_social","_ui","_lucideReact","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","has","get","set","hasOwnProperty","call","getOwnPropertyDescriptor","__jsx","createElement","postId","initialLiked","initialCount","profile","useSocialProfile","liked","setLiked","useState","count","setCount","processing","setProcessing","useEffect","toggleLike","unlikePost","id","c","likePost","Button","size","variant","onClick","disabled","className","__self","__source","fileName","lineNumber","columnNumber","Heart"],"sources":["LikeButton.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useSocialProfile } from \"@hooks/useSocialProfile\";\nimport { likePost, unlikePost } from \"@lib/api/social\";\nimport { Button } from \"@components/ui\";\nimport { Heart } from \"lucide-react\";\n\ninterface Props {\n  postId: string;\n  initialLiked?: boolean;\n  initialCount?: number;\n}\n\nexport default function LikeButton({ postId, initialLiked = false, initialCount = 0 }: Props) {\n  const { profile } = useSocialProfile();\n  const [liked, setLiked] = useState(initialLiked);\n  const [count, setCount] = useState(initialCount);\n  const [processing, setProcessing] = useState(false);\n\n  useEffect(() => {\n    setLiked(initialLiked);\n    setCount(initialCount);\n  }, [initialLiked, initialCount]);\n\n  const toggleLike = async () => {\n    if (!profile) return;\n    setProcessing(true);\n    try {\n      if (liked) {\n        await unlikePost(postId, profile.id);\n        setLiked(false);\n        setCount((c) => c - 1);\n      } else {\n        await likePost(postId, profile.id);\n        setLiked(true);\n        setCount((c) => c + 1);\n      }\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  if (!profile) return null;\n\n  return (\n    <Button\n      size=\"sm\"\n      variant={liked ? \"secondary\" : \"outline\"}\n      onClick={toggleLike}\n      disabled={processing}\n      className=\"flex items-center gap-1 text-foreground bg-transparent transition-colors hover:bg-transparent hover:ring-0 border-none\"\n      aria-label={liked ? \"Unlike\" : \"Like\"}\n    >\n      <Heart\n        className={`w-4 h-4 ${liked ? \"fill-current text-primary\" : \"\"}`}\n      />\n      {count}\n    </Button>\n  );\n}\n"],"mappings":"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","ignoreList":[]}