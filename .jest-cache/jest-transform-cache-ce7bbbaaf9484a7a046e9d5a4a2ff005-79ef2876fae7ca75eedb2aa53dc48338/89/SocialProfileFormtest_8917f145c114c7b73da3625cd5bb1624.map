{"version":3,"names":["_getJestObj","mock","useRouter","push","jest","fn","useSession","_interopRequireDefault","require","_react","_react2","_userEvent","_SocialProfileForm","_social","_react3","_jsxFileName","__jsx","default","createElement","mockedCreate","createSocialProfile","mockedUseSession","describe","beforeEach","clearAllMocks","it","mockReturnValue","data","user","id","mockResolvedValue","onCreated","userEvent","setup","render","__self","__source","fileName","lineNumber","columnNumber","type","screen","getByLabelText","click","getByRole","name","expect","toHaveBeenCalledWith","userId","username","bio","undefined","toHaveBeenCalled","findByText","toBeInTheDocument","not"],"sources":["SocialProfileForm.test.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport \"@testing-library/jest-dom\";\nimport React from \"react\";\nimport { render, screen } from \"@testing-library/react\";\nimport userEvent from \"@testing-library/user-event\";\nimport SocialProfileForm from \"../social/SocialProfileForm\";\nimport { createSocialProfile } from \"@lib/api/social\";\nimport { useSession } from \"next-auth/react\";\n\njest.mock(\"next/navigation\", () => ({\n  useRouter: () => ({ push: jest.fn() }),\n}));\n\njest.mock(\"@lib/api/social\");\njest.mock(\"next-auth/react\", () => ({ useSession: jest.fn() }));\n\nconst mockedCreate = createSocialProfile as jest.MockedFunction<typeof createSocialProfile>;\nconst mockedUseSession = useSession as jest.Mock;\n\ndescribe(\"SocialProfileForm\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"submits profile data\", async () => {\n    mockedUseSession.mockReturnValue({ data: { user: { id: \"u1\" } } });\n    mockedCreate.mockResolvedValue({ id: \"p1\" } as any);\n    const onCreated = jest.fn();\n    const user = userEvent.setup();\n\n    render(<SocialProfileForm onCreated={onCreated} />);\n\n    await user.type(screen.getByLabelText(/username/i), \"tester\");\n    await user.click(screen.getByRole(\"button\", { name: /create profile/i }));\n\n    expect(mockedCreate).toHaveBeenCalledWith({\n      userId: \"u1\",\n      username: \"tester\",\n      bio: undefined,\n    });\n    expect(onCreated).toHaveBeenCalled();\n    expect(await screen.findByText(/profile created!/i)).toBeInTheDocument();\n  });\n\n  it(\"shows error when session missing\", async () => {\n    mockedUseSession.mockReturnValue({ data: null });\n    const user = userEvent.setup();\n\n    render(<SocialProfileForm />);\n\n    await user.type(screen.getByLabelText(/username/i), \"tester\");\n    await user.click(screen.getByRole(\"button\", { name: /create profile/i }));\n\n    expect(mockedCreate).not.toHaveBeenCalled();\n    expect(await screen.findByText(/username required/i)).toBeInTheDocument();\n  });\n});\n"],"mappings":"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","ignoreList":[]}