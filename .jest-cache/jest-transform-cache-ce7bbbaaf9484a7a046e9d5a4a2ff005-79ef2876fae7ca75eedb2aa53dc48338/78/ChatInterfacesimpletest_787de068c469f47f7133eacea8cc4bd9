785a7cd2859c5d442114d052d7f8500d
"use strict";

// Mock NextAuth
_getJestObj().mock('next-auth/react', () => ({
  useSession: jest.fn()
}));

// Mock fetch
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
require("@testing-library/jest-dom");
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _ChatInterface = require("../chat/ChatInterface");
var _react3 = require("next-auth/react");
var _jsxFileName = "/Users/jacksonthetford/Desktop/maratron-monorepo/apps/web/src/components/__tests__/ChatInterface-simple.test.tsx";
var __jsx = _react.default.createElement;
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
global.fetch = jest.fn();
const mockSession = {
  user: {
    id: 'test-user-id',
    name: 'Test User',
    email: 'test@example.com'
  }
};
describe('ChatInterface', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    fetch.mockResolvedValue({
      ok: true,
      json: () => Promise.resolve({
        id: 'test-message-id',
        role: 'assistant',
        content: 'Test response'
      })
    });
  });
  it('shows loading state when session is loading', () => {
    _react3.useSession.mockReturnValue({
      data: null,
      status: 'loading'
    });
    (0, _react2.render)(__jsx(_ChatInterface.ChatInterface, {
      __self: void 0,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 42,
        columnNumber: 12
      }
    }));
    expect(_react2.screen.getByText('Loading...')).toBeInTheDocument();
  });
  it('shows authentication required when not authenticated', () => {
    _react3.useSession.mockReturnValue({
      data: null,
      status: 'unauthenticated'
    });
    (0, _react2.render)(__jsx(_ChatInterface.ChatInterface, {
      __self: void 0,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 52,
        columnNumber: 12
      }
    }));
    expect(_react2.screen.getByText(/Please sign in to access/)).toBeInTheDocument();
  });
  it('renders chat interface when authenticated', () => {
    _react3.useSession.mockReturnValue({
      data: mockSession,
      status: 'authenticated'
    });
    (0, _react2.render)(__jsx(_ChatInterface.ChatInterface, {
      __self: void 0,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 62,
        columnNumber: 12
      }
    }));
    expect(_react2.screen.getByText('Maratron AI')).toBeInTheDocument();
    expect(_react2.screen.getByRole('textbox')).toBeInTheDocument();
  });
  it('displays quick action buttons', () => {
    _react3.useSession.mockReturnValue({
      data: mockSession,
      status: 'authenticated'
    });
    (0, _react2.render)(__jsx(_ChatInterface.ChatInterface, {
      __self: void 0,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 73,
        columnNumber: 12
      }
    }));
    expect(_react2.screen.getByText('Recent Runs')).toBeInTheDocument();
    expect(_react2.screen.getByText('Training Summary')).toBeInTheDocument();
    expect(_react2.screen.getByText('My Shoes')).toBeInTheDocument();
  });
  it('allows typing in the textarea', () => {
    _react3.useSession.mockReturnValue({
      data: mockSession,
      status: 'authenticated'
    });
    (0, _react2.render)(__jsx(_ChatInterface.ChatInterface, {
      __self: void 0,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 85,
        columnNumber: 12
      }
    }));
    const textarea = _react2.screen.getByRole('textbox');
    _react2.fireEvent.change(textarea, {
      target: {
        value: 'Hello'
      }
    });
    expect(textarea).toHaveValue('Hello');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ1c2VTZXNzaW9uIiwiamVzdCIsImZuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX0NoYXRJbnRlcmZhY2UiLCJfcmVhY3QzIiwiX2pzeEZpbGVOYW1lIiwiX19qc3giLCJkZWZhdWx0IiwiY3JlYXRlRWxlbWVudCIsImdsb2JhbCIsImZldGNoIiwibW9ja1Nlc3Npb24iLCJ1c2VyIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJvbGUiLCJjb250ZW50IiwiaXQiLCJtb2NrUmV0dXJuVmFsdWUiLCJkYXRhIiwic3RhdHVzIiwicmVuZGVyIiwiQ2hhdEludGVyZmFjZSIsIl9fc2VsZiIsIl9fc291cmNlIiwiZmlsZU5hbWUiLCJsaW5lTnVtYmVyIiwiY29sdW1uTnVtYmVyIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJnZXRCeVJvbGUiLCJ0ZXh0YXJlYSIsImZpcmVFdmVudCIsImNoYW5nZSIsInRhcmdldCIsInZhbHVlIiwidG9IYXZlVmFsdWUiXSwic291cmNlcyI6WyJDaGF0SW50ZXJmYWNlLXNpbXBsZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IENoYXRJbnRlcmZhY2UgfSBmcm9tICcuLi9jaGF0L0NoYXRJbnRlcmZhY2UnO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9yZWFjdCc7XG5cbi8vIE1vY2sgTmV4dEF1dGhcbmplc3QubW9jaygnbmV4dC1hdXRoL3JlYWN0JywgKCkgPT4gKHtcbiAgdXNlU2Vzc2lvbjogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmNvbnN0IG1vY2tTZXNzaW9uID0ge1xuICB1c2VyOiB7XG4gICAgaWQ6ICd0ZXN0LXVzZXItaWQnLFxuICAgIG5hbWU6ICdUZXN0IFVzZXInLFxuICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gIH0sXG59O1xuXG5kZXNjcmliZSgnQ2hhdEludGVyZmFjZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgKGZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBpZDogJ3Rlc3QtbWVzc2FnZS1pZCcsXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiAnVGVzdCByZXNwb25zZScsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3dzIGxvYWRpbmcgc3RhdGUgd2hlbiBzZXNzaW9uIGlzIGxvYWRpbmcnLCAoKSA9PiB7XG4gICAgKHVzZVNlc3Npb24gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIHN0YXR1czogJ2xvYWRpbmcnLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyKDxDaGF0SW50ZXJmYWNlIC8+KTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9hZGluZy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvd3MgYXV0aGVudGljYXRpb24gcmVxdWlyZWQgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsICgpID0+IHtcbiAgICAodXNlU2Vzc2lvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgc3RhdHVzOiAndW5hdXRoZW50aWNhdGVkJyxcbiAgICB9KTtcblxuICAgIHJlbmRlcig8Q2hhdEludGVyZmFjZSAvPik7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL1BsZWFzZSBzaWduIGluIHRvIGFjY2Vzcy8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgncmVuZGVycyBjaGF0IGludGVyZmFjZSB3aGVuIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgKHVzZVNlc3Npb24gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZGF0YTogbW9ja1Nlc3Npb24sXG4gICAgICBzdGF0dXM6ICdhdXRoZW50aWNhdGVkJyxcbiAgICB9KTtcblxuICAgIHJlbmRlcig8Q2hhdEludGVyZmFjZSAvPik7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ01hcmF0cm9uIEFJJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc3BsYXlzIHF1aWNrIGFjdGlvbiBidXR0b25zJywgKCkgPT4ge1xuICAgICh1c2VTZXNzaW9uIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGRhdGE6IG1vY2tTZXNzaW9uLFxuICAgICAgc3RhdHVzOiAnYXV0aGVudGljYXRlZCcsXG4gICAgfSk7XG5cbiAgICByZW5kZXIoPENoYXRJbnRlcmZhY2UgLz4pO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdSZWNlbnQgUnVucycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUcmFpbmluZyBTdW1tYXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ015IFNob2VzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdhbGxvd3MgdHlwaW5nIGluIHRoZSB0ZXh0YXJlYScsICgpID0+IHtcbiAgICAodXNlU2Vzc2lvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrU2Vzc2lvbixcbiAgICAgIHN0YXR1czogJ2F1dGhlbnRpY2F0ZWQnLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyKDxDaGF0SW50ZXJmYWNlIC8+KTtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IHNjcmVlbi5nZXRCeVJvbGUoJ3RleHRib3gnKTtcbiAgICBcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHRleHRhcmVhLCB7IHRhcmdldDogeyB2YWx1ZTogJ0hlbGxvJyB9IH0pO1xuICAgIGV4cGVjdCh0ZXh0YXJlYSkudG9IYXZlVmFsdWUoJ0hlbGxvJyk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiOztBQU1BO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGlCQUFpQixFQUFFLE9BQU87RUFDbENDLFVBQVUsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUM7QUFDdEIsQ0FBQyxDQUFDLENBQUM7O0FBRUg7QUFBQSxJQUFBQyxzQkFBQSxHQUFBQyxPQUFBO0FBWEFBLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFKLE9BQUE7QUFBNkMsSUFBQUssWUFBQTtBQUFBLElBQUFDLEtBQUEsR0FBQUwsTUFBQSxDQUFBTSxPQUFBLENBQUFDLGFBQUE7QUFBQSxTQUFBZCxZQUFBO0VBQUE7SUFBQUc7RUFBQSxJQUFBRyxPQUFBO0VBQUFOLFdBQUEsR0FB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