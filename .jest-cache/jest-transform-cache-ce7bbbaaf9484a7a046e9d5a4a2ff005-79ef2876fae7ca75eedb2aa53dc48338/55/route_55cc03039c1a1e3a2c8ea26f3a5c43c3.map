{"version":3,"names":["cov_wqik6sc8o","actualCoverage","NextResponse","prisma","POST","req","f","followerId","followingId","s","json","b","error","status","follow","upsert","where","followerId_followingId","update","create","err","console","GET","nextUrl","searchParams","get","findUnique","following","DELETE","delete"],"sources":["route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@lib/prisma\";\n\nexport async function POST(req: NextRequest) {\n  const { followerId, followingId } = await req.json();\n  if (!followerId || !followingId) {\n    return NextResponse.json({ error: \"followerId and followingId required\" }, { status: 400 });\n  }\n  try {\n    const follow = await prisma.follow.upsert({\n      where: { followerId_followingId: { followerId, followingId } },\n      update: {},\n      create: { followerId, followingId },\n    });\n    return NextResponse.json(follow, { status: 201 });\n  } catch (err) {\n    console.error(\"Error following\", err);\n    return NextResponse.json({ error: \"Failed\" }, { status: 500 });\n  }\n}\n\nexport async function GET(req: NextRequest) {\n  const followerId = req.nextUrl.searchParams.get(\"followerId\");\n  const followingId = req.nextUrl.searchParams.get(\"followingId\");\n  if (!followerId || !followingId) {\n    return NextResponse.json(\n      { error: \"followerId and followingId required\" },\n      { status: 400 }\n    );\n  }\n  try {\n    const follow = await prisma.follow.findUnique({\n      where: { followerId_followingId: { followerId, followingId } },\n    });\n    return NextResponse.json({ following: !!follow });\n  } catch (err) {\n    console.error(\"Error checking follow\", err);\n    return NextResponse.json({ error: \"Failed\" }, { status: 500 });\n  }\n}\n\nexport async function DELETE(req: NextRequest) {\n  const { followerId, followingId } = await req.json();\n  try {\n    await prisma.follow.delete({\n      where: { followerId_followingId: { followerId, followingId } },\n    });\n    return NextResponse.json({});\n  } catch (err) {\n    console.error(\"Error unfollow\", err);\n    return NextResponse.json({ error: \"Failed\" }, { status: 500 });\n  }\n}\n"],"mappings":"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","ignoreList":[]}