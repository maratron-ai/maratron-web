{"version":3,"names":["Object","defineProperty","exports","value","default","FollowUserButton","_react","_interopRequireWildcard","require","_react2","_useSocialProfile","_social","_ui","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","has","get","set","hasOwnProperty","call","getOwnPropertyDescriptor","__jsx","createElement","profileId","data","session","useSession","profile","useSocialProfile","following","setFollowing","useState","loading","setLoading","processing","setProcessing","useEffect","check","res","isFollowing","id","user","onToggle","unfollowUser","followUser","err","console","error","Button","onClick","size","disabled","className","__self","__source","fileName","lineNumber","columnNumber"],"sources":["FollowUserButton.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport { useSocialProfile } from \"@hooks/useSocialProfile\";\nimport { followUser, unfollowUser, isFollowing } from \"@lib/api/social\";\nimport { Button } from \"@components/ui\";\n\ninterface Props {\n  profileId: string;\n}\n\nexport default function FollowUserButton({ profileId }: Props) {\n  const { data: session } = useSession();\n  const { profile } = useSocialProfile();\n  const [following, setFollowing] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [processing, setProcessing] = useState(false);\n\n  useEffect(() => {\n    const check = async () => {\n      if (profile) {\n        try {\n          const res = await isFollowing(profile.id, profileId);\n          setFollowing(res);\n        } catch {\n          setFollowing(false);\n        }\n      }\n      setLoading(false);\n    };\n    check();\n  }, [profile, profileId]);\n\n  if (!session?.user || !profile || profile.id === profileId || loading) return null;\n\n  const onToggle = async () => {\n    setProcessing(true);\n    try {\n      if (following) {\n        await unfollowUser(profile.id, profileId);\n        setFollowing(false);\n      } else {\n        await followUser(profile.id, profileId);\n        setFollowing(true);\n      }\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  return (\n    <Button\n      onClick={onToggle}\n      size=\"sm\"\n      disabled={processing}\n      className=\"block w-auto text-foreground bg-transparent no-underline transition-colors hover:text-background hover:no-underline hover:bg-brand-from\"\n    >\n      {following ? \"Unfollow\" : \"Follow\"}\n    </Button>\n  );\n}\n"],"mappings":"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","ignoreList":[]}