{"version":3,"names":["Object","defineProperty","exports","value","default","PhotoUpload","_react","_interopRequireWildcard","require","_ui","_upload","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","has","get","set","hasOwnProperty","call","getOwnPropertyDescriptor","__jsx","createElement","onChange","disabled","text","inputRef","useRef","handleFileChange","file","target","files","type","startsWith","alert","size","url","uploadImage","error","console","className","__self","__source","fileName","lineNumber","columnNumber","src","alt","Button","variant","onClick","current","click","ref","accept","capture"],"sources":["photo-upload.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef } from \"react\";\nimport { Button } from \"@components/ui\";\nimport { uploadImage } from \"@lib/api/upload\";\n\ninterface PhotoUploadProps {\n  value?: string;\n  onChange?: (url: string) => void;\n  disabled?: boolean;\n  text?: string;\n}\n\nexport default function PhotoUpload({ value, onChange, disabled, text }: PhotoUploadProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    try {\n      // Validate file type and size\n      if (!file.type.startsWith('image/')) {\n        alert('Please select a valid image file.');\n        return;\n      }\n      \n      // Limit file size to 5MB\n      if (file.size > 5 * 1024 * 1024) {\n        alert('File size must be less than 5MB.');\n        return;\n      }\n      \n      const url = await uploadImage(file);\n      onChange?.(url);\n    } catch (error) {\n      console.error('Failed to upload image:', error);\n      alert('Failed to upload image. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-4\">\n      {value && (\n        // eslint-disable-next-line @next/next/no-img-element\n        <img\n          src={value}\n          alt=\"Preview\"\n          className=\"h-20 w-20 rounded-md object-cover\"\n        />\n      )}\n      <div>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          onClick={() => inputRef.current?.click()}\n          disabled={disabled}\n          className=\"\n            inline-block max-w-xs h-auto\n            whitespace-normal break-words\n            px-4 py-2\n            text-foreground bg-transparent no-underline\n            transition-colors border-none\n            hover:text-background hover:no-underline hover:bg-brand-from\n            focus:ring-0 \n          \"\n        >\n          {text || \"Upload Photo\"}\n        </Button>\n        <input\n          ref={inputRef}\n          type=\"file\"\n          accept=\"image/*\"\n          capture=\"environment\"\n          onChange={handleFileChange}\n          className=\"hidden\"\n          disabled={disabled}\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}