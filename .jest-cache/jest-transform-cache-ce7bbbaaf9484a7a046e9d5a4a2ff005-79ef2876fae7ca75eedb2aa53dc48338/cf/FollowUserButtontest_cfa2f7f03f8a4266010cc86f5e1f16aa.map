{"version":3,"names":["_getJestObj","mock","useSession","jest","fn","useSocialProfile","_interopRequireDefault","require","_react","_react2","_userEvent","_FollowUserButton","_social","_react3","_useSocialProfile","_jsxFileName","__jsx","default","createElement","mockedFollow","followUser","mockedUnfollow","unfollowUser","mockedIsFollowing","isFollowing","mockedSession","mockedUseProfile","describe","beforeEach","clearAllMocks","it","mockReturnValue","data","user","id","profile","mockResolvedValue","userEvent","setup","render","profileId","__self","__source","fileName","lineNumber","columnNumber","btn","screen","findByRole","name","click","expect","toHaveBeenCalledWith","toHaveTextContent"],"sources":["FollowUserButton.test.tsx"],"sourcesContent":["import \"@testing-library/jest-dom\";\nimport React from \"react\";\nimport { render, screen } from \"@testing-library/react\";\nimport userEvent from \"@testing-library/user-event\";\nimport FollowUserButton from \"../social/FollowUserButton\";\nimport { followUser, unfollowUser, isFollowing } from \"@lib/api/social\";\nimport { useSession } from \"next-auth/react\";\nimport { useSocialProfile } from \"@hooks/useSocialProfile\";\n\njest.mock(\"@lib/api/social\");\njest.mock(\"next-auth/react\", () => ({ useSession: jest.fn() }));\njest.mock(\"@hooks/useSocialProfile\", () => ({ useSocialProfile: jest.fn() }));\n\nconst mockedFollow = followUser as jest.MockedFunction<typeof followUser>;\nconst mockedUnfollow = unfollowUser as jest.MockedFunction<typeof unfollowUser>;\nconst mockedIsFollowing = isFollowing as jest.MockedFunction<typeof isFollowing>;\nconst mockedSession = useSession as jest.Mock;\nconst mockedUseProfile = useSocialProfile as jest.Mock;\n\ndescribe(\"FollowUserButton\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"follows another user\", async () => {\n    mockedSession.mockReturnValue({ data: { user: { id: \"u1\" } } });\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\" } });\n    mockedIsFollowing.mockResolvedValue(false);\n    mockedFollow.mockResolvedValue();\n    const user = userEvent.setup();\n\n    render(<FollowUserButton profileId=\"p2\" />);\n\n    const btn = await screen.findByRole(\"button\", { name: /follow/i });\n    await user.click(btn);\n\n    expect(mockedFollow).toHaveBeenCalledWith(\"p1\", \"p2\");\n    expect(btn).toHaveTextContent(/unfollow/i);\n  });\n\n  it(\"unfollows a user\", async () => {\n    mockedSession.mockReturnValue({ data: { user: { id: \"u1\" } } });\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\" } });\n    mockedIsFollowing.mockResolvedValue(true);\n    mockedUnfollow.mockResolvedValue();\n    const user = userEvent.setup();\n\n    render(<FollowUserButton profileId=\"p2\" />);\n\n    const btn = await screen.findByRole(\"button\", { name: /unfollow/i });\n    await user.click(btn);\n\n    expect(mockedUnfollow).toHaveBeenCalledWith(\"p1\", \"p2\");\n    expect(btn).toHaveTextContent(/follow/i);\n  });\n});\n"],"mappings":";;AASAA,WAAA,GAAKC,IAAI,CAAC,iBAAiB,CAAC;AAC5BD,WAAA,GAAKC,IAAI,CAAC,iBAAiB,EAAE,OAAO;EAAEC,UAAU,EAAEC,IAAI,CAACC,EAAE,CAAC;AAAE,CAAC,CAAC,CAAC;AAC/DJ,WAAA,GAAKC,IAAI,CAAC,yBAAyB,EAAE,OAAO;EAAEI,gBAAgB,EAAEF,IAAI,CAACC,EAAE,CAAC;AAAE,CAAC,CAAC,CAAC;AAAC,IAAAE,sBAAA,GAAAC,OAAA;AAX9EA,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,iBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,OAAA,GAAAL,OAAA;AACA,IAAAM,OAAA,GAAAN,OAAA;AACA,IAAAO,iBAAA,GAAAP,OAAA;AAA2D,IAAAQ,YAAA;AAAA,IAAAC,KAAA,GAAAR,MAAA,CAAAS,OAAA,CAAAC,aAAA;AAAA,SAAAlB,YAAA;EAAA;IAAAG;EAAA,IAAAI,OAAA;EAAAP,WAAA,GAAAA,CAAA,KAAAG,IAAA;EAAA,OAAAA,IAAA;AAAA;AAM3D,MAAMgB,YAAY,GAAGC,kBAAoD;AACzE,MAAMC,cAAc,GAAGC,oBAAwD;AAC/E,MAAMC,iBAAiB,GAAGC,mBAAsD;AAChF,MAAMC,aAAa,GAAGvB,kBAAuB;AAC7C,MAAMwB,gBAAgB,GAAGrB,kCAA6B;AAEtDsB,QAAQ,CAAC,kBAAkB,EAAE,MAAM;EACjCC,UAAU,CAAC,MAAM;IACfzB,IAAI,CAAC0B,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,sBAAsB,EAAE,YAAY;IACrCL,aAAa,CAACM,eAAe,CAAC;MAAEC,IAAI,EAAE;QAAEC,IAAI,EAAE;UAAEC,EAAE,EAAE;QAAK;MAAE;IAAE,CAAC,CAAC;IAC/DR,gBAAgB,CAACK,eAAe,CAAC;MAAEI,OAAO,EAAE;QAAED,EAAE,EAAE;MAAK;IAAE,CAAC,CAAC;IAC3DX,iBAAiB,CAACa,iBAAiB,CAAC,KAAK,CAAC;IAC1CjB,YAAY,CAACiB,iBAAiB,CAAC,CAAC;IAChC,MAAMH,IAAI,GAAGI,kBAAS,CAACC,KAAK,CAAC,CAAC;IAE9B,IAAAC,cAAM,EAACvB,KAAA,CAACL,iBAAA,CAAAM,OAAgB;MAACuB,SAAS,EAAC,IAAI;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAA5B,YAAA;QAAA6B,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC,CAAC;IAE3C,MAAMC,GAAG,GAAG,MAAMC,cAAM,CAACC,UAAU,CAAC,QAAQ,EAAE;MAAEC,IAAI,EAAE;IAAU,CAAC,CAAC;IAClE,MAAMhB,IAAI,CAACiB,KAAK,CAACJ,GAAG,CAAC;IAErBK,MAAM,CAAChC,YAAY,CAAC,CAACiC,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC;IACrDD,MAAM,CAACL,GAAG,CAAC,CAACO,iBAAiB,CAAC,WAAW,CAAC;EAC5C,CAAC,CAAC;EAEFvB,EAAE,CAAC,kBAAkB,EAAE,YAAY;IACjCL,aAAa,CAACM,eAAe,CAAC;MAAEC,IAAI,EAAE;QAAEC,IAAI,EAAE;UAAEC,EAAE,EAAE;QAAK;MAAE;IAAE,CAAC,CAAC;IAC/DR,gBAAgB,CAACK,eAAe,CAAC;MAAEI,OAAO,EAAE;QAAED,EAAE,EAAE;MAAK;IAAE,CAAC,CAAC;IAC3DX,iBAAiB,CAACa,iBAAiB,CAAC,IAAI,CAAC;IACzCf,cAAc,CAACe,iBAAiB,CAAC,CAAC;IAClC,MAAMH,IAAI,GAAGI,kBAAS,CAACC,KAAK,CAAC,CAAC;IAE9B,IAAAC,cAAM,EAACvB,KAAA,CAACL,iBAAA,CAAAM,OAAgB;MAACuB,SAAS,EAAC,IAAI;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAA5B,YAAA;QAAA6B,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC,CAAC;IAE3C,MAAMC,GAAG,GAAG,MAAMC,cAAM,CAACC,UAAU,CAAC,QAAQ,EAAE;MAAEC,IAAI,EAAE;IAAY,CAAC,CAAC;IACpE,MAAMhB,IAAI,CAACiB,KAAK,CAACJ,GAAG,CAAC;IAErBK,MAAM,CAAC9B,cAAc,CAAC,CAAC+B,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC;IACvDD,MAAM,CAACL,GAAG,CAAC,CAACO,iBAAiB,CAAC,SAAS,CAAC;EAC1C,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}