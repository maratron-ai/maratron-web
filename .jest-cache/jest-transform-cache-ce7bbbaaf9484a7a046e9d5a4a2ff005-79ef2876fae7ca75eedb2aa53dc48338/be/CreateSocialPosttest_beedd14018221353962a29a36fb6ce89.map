{"version":3,"names":["_getJestObj","mock","listRuns","jest","fn","useSocialProfile","_interopRequireDefault","require","_react","_react2","_userEvent","_CreateSocialPost","_social","_run","_useSocialProfile","_jsxFileName","__jsx","default","createElement","mockedCreate","createPost","mockedListRuns","mockedUseProfile","describe","beforeEach","clearAllMocks","it","mockReturnValue","profile","id","userId","mockResolvedValue","date","Date","toISOString","distance","distanceUnit","duration","onCreated","user","userEvent","setup","render","__self","__source","fileName","lineNumber","columnNumber","waitFor","expect","toHaveBeenCalled","selectOptions","screen","findByLabelText","type","getByLabelText","click","getByRole","name","toHaveBeenCalledWith","socialProfileId","time","caption","photoUrl","undefined","findByText","toBeInTheDocument","groupId","objectContaining","form","findByRole","then","btn","closest","fireEvent","submit","not"],"sources":["CreateSocialPost.test.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport \"@testing-library/jest-dom\";\nimport React from \"react\";\nimport { render, screen, fireEvent, waitFor } from \"@testing-library/react\";\nimport userEvent from \"@testing-library/user-event\";\nimport CreateSocialPost from \"../social/CreateSocialPost\";\nimport { createPost } from \"@lib/api/social\";\nimport { listRuns } from \"@lib/api/run\";\nimport { useSocialProfile } from \"@hooks/useSocialProfile\";\n\njest.mock(\"@lib/api/social\");\njest.mock(\"@lib/api/run\", () => ({ listRuns: jest.fn() }));\njest.mock(\"@hooks/useSocialProfile\", () => ({ useSocialProfile: jest.fn() }));\n\nconst mockedCreate = createPost as jest.MockedFunction<typeof createPost>;\nconst mockedListRuns = listRuns as jest.MockedFunction<typeof listRuns>;\nconst mockedUseProfile = useSocialProfile as jest.Mock;\n\ndescribe(\"CreateSocialPost\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"submits post data\", async () => {\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\", userId: \"u1\" } });\n    mockedCreate.mockResolvedValue({ id: \"post1\" } as any);\n    mockedListRuns.mockResolvedValue([\n      {\n        id: \"r1\",\n        userId: \"u1\",\n        date: new Date().toISOString(),\n        distance: 3,\n        distanceUnit: \"miles\",\n        duration: \"00:20:00\",\n      } as any,\n    ]);\n    const onCreated = jest.fn();\n    const user = userEvent.setup();\n\n    render(<CreateSocialPost onCreated={onCreated} />);\n\n    await waitFor(() => expect(mockedListRuns).toHaveBeenCalled());\n    await user.selectOptions(await screen.findByLabelText(/run/i), \"r1\");\n    await user.type(screen.getByLabelText(/caption/i), \"Nice run\");\n    await user.click(screen.getByRole(\"button\", { name: /post/i }));\n\n    expect(mockedCreate).toHaveBeenCalledWith({\n      socialProfileId: \"p1\",\n      distance: 3,\n      time: \"00:20:00\",\n      caption: \"Nice run\",\n      photoUrl: undefined,\n    });\n    expect(onCreated).toHaveBeenCalled();\n    expect(await screen.findByText(/posted!/i)).toBeInTheDocument();\n  });\n\n  it(\"includes groupId when provided\", async () => {\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\", userId: \"u1\" } });\n    mockedCreate.mockResolvedValue({ id: \"post1\" } as any);\n    mockedListRuns.mockResolvedValue([\n      {\n        id: \"r1\",\n        userId: \"u1\",\n        date: new Date().toISOString(),\n        distance: 3,\n        distanceUnit: \"miles\",\n        duration: \"00:20:00\",\n      } as any,\n    ]);\n    const user = userEvent.setup();\n\n    render(<CreateSocialPost groupId=\"g1\" />);\n\n    await waitFor(() => expect(mockedListRuns).toHaveBeenCalled());\n    await user.selectOptions(await screen.findByLabelText(/run/i), \"r1\");\n    await user.click(screen.getByRole(\"button\", { name: /post/i }));\n\n    expect(mockedCreate).toHaveBeenCalledWith(\n      expect.objectContaining({ groupId: \"g1\" })\n    );\n  });\n\n  it(\"shows error when required fields missing\", async () => {\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\", userId: \"u1\" } });\n    mockedListRuns.mockResolvedValue([\n      {\n        id: \"r1\",\n        userId: \"u1\",\n        date: new Date().toISOString(),\n        distance: 3,\n        distanceUnit: \"miles\",\n        duration: \"00:20:00\",\n      } as any,\n    ]);\n    render(<CreateSocialPost />);\n\n    const form = await screen\n      .findByRole(\"button\", { name: /post/i })\n      .then((btn) => btn.closest(\"form\")!);\n    fireEvent.submit(form);\n\n    expect(mockedCreate).not.toHaveBeenCalled();\n    expect(await screen.findByText(/select a run/i)).toBeInTheDocument();\n  });\n});\n"],"mappings":"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","ignoreList":[]}