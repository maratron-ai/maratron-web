{"version":3,"names":["_getJestObj","mock","useSession","jest","fn","useSocialProfile","__esModule","default","props","MockCreatePost","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_interopRequireDefault","require","_react","_react2","_SocialFeed","_react3","_useSocialProfile","_axios","createElement","mockedSession","mockedUseProfile","mockedAxios","axios","describe","beforeEach","clearAllMocks","it","mockReturnValue","data","profile","loading","render","expect","screen","getByText","toBeInTheDocument","user","id","get","mockResolvedValue","distance","time","socialProfile","username","waitFor","toHaveBeenCalledWith","findByText","groupId","objectContaining"],"sources":["SocialFeed.test.tsx"],"sourcesContent":["import \"@testing-library/jest-dom\";\nimport React from \"react\";\nimport { render, screen, waitFor } from \"@testing-library/react\";\nimport SocialFeed from \"../social/SocialFeed\";\nimport { useSession } from \"next-auth/react\";\nimport { useSocialProfile } from \"@hooks/useSocialProfile\";\nimport axios from \"axios\";\n\njest.mock(\"next-auth/react\", () => ({ useSession: jest.fn() }));\njest.mock(\"@hooks/useSocialProfile\", () => ({ useSocialProfile: jest.fn() }));\njest.mock(\"axios\");\n\n// Mock the CreateSocialPost component\nconst MockCreatePost = jest.fn();\njest.mock(\"@components/social/CreateSocialPost\", () => ({\n  __esModule: true,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default: (props: Record<string, any>) => {\n    MockCreatePost(props);\n    return <div data-testid=\"create-post\" />;\n  },\n}));\n\nconst mockedSession = useSession as jest.Mock;\nconst mockedUseProfile = useSocialProfile as jest.Mock;\nconst mockedAxios = axios as jest.Mocked<typeof axios>;\n\ndescribe(\"SocialFeed\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it(\"requires login\", () => {\n    mockedSession.mockReturnValue({ data: null });\n    mockedUseProfile.mockReturnValue({ profile: null, loading: false });\n    render(<SocialFeed />);\n    expect(screen.getByText(/please log in/i)).toBeInTheDocument();\n  });\n\n  it(\"shows posts\", async () => {\n    mockedSession.mockReturnValue({ data: { user: { id: \"u1\" } } });\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\" }, loading: false });\n    mockedAxios.get.mockResolvedValue({ data: [{ id: \"post1\", distance: 3, time: \"00:20:00\", socialProfile: { username: \"tester\" } }] });\n\n    render(<SocialFeed />);\n\n    await waitFor(() => expect(mockedAxios.get).toHaveBeenCalledWith(\"/api/social/feed?userId=u1\"));\n\n    expect(await screen.findByText(/tester/)).toBeInTheDocument();\n    expect(screen.getByText(/3 mi in 00:20:00/)).toBeInTheDocument();\n  });\n\n  it(\"loads group feed when groupId passed\", async () => {\n    mockedSession.mockReturnValue({ data: { user: { id: \"u1\" } } });\n    mockedUseProfile.mockReturnValue({ profile: { id: \"p1\" }, loading: false });\n    mockedAxios.get.mockResolvedValue({ data: [] });\n\n    render(<SocialFeed groupId=\"g1\" />);\n\n    // Wait for the API call to be made\n    await waitFor(() =>\n      expect(mockedAxios.get).toHaveBeenCalledWith(\n        \"/api/social/groups/g1/posts?profileId=p1\"\n      )\n    );\n\n    // Wait for the CreatePost component to be rendered\n    await waitFor(() => {\n      expect(MockCreatePost).toHaveBeenCalledWith(\n        expect.objectContaining({ groupId: \"g1\" })\n      );\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}